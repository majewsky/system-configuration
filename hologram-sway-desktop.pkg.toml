[package]
name        = "hologram-sway-desktop"
version     = "0.3.1"
description = "hologram: Wayland desktop using Sway compositor and selected KDE apps"

requires = [
  "hologram-base-gui-minimal",
  "sway",
  "swaylock",
  "dmenu", # sway.cfg uses dmenu_run
  "sddm",
  "xorg-server-xwayland",
  # Wayland tools
  "grim",
  "slurp",
  "waybar",
  "wl-clipboard",
  # selected KDE applications
  "filelight",
  "kcharselect",
  "kcolorchooser",
  "kdeconnect", # see below
  "kolourpaint",
  "konsole",
  "kruler",
  # platform integration for non-KDE desktop
  "qt5ct",
  "qt5-wayland",
]

[[file]]
path    = "/etc/sddm.conf.d/30-sway-desktop.conf"
content = """
    [Autologin]
    User=stefan
    Session=sway.desktop

    [Theme]
    Current=breeze
"""

################################################################################
# declare a target for services that only need to be started under Sway, not
# under Plasma

[[file]]
path    = "/home/stefan/.config/systemd/user/sway-session.target"
content = '''
    [Unit]
    Description=Services that are only run within Sway
    Wants=kdeconnectd.service kdeconnect-indicator.service
'''

[[file]]
path    = "/home/stefan/.config/systemd/user/kdeconnectd.service"
content = '''
    [Unit]
    Description=KDE Connect Daemon

    [Service]
    ExecStart=/usr/lib/kdeconnectd
'''

[[file]]
path    = "/home/stefan/.config/systemd/user/kdeconnect-indicator.service"
content = '''
    [Unit]
    Description=KDE Connect Indicator (tray icon)
    After=kdeconnectd.service

    [Service]
    ExecStart=/usr/bin/kdeconnect-indicator
'''
